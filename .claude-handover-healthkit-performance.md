# HealthKit LIVE & Today's Performance å®Ÿè£…å¼•ãç¶™ãæ›¸

## ğŸ“‹ å®Ÿè£…æ¦‚è¦

HomeViewã«ä»¥ä¸‹2ã¤ã®æ–°è¦ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ä¸­ï¼š
1. **HealthKit LIVE**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ HealthKitãƒ‡ãƒ¼ã‚¿è¡¨ç¤ºï¼ˆãƒ˜ãƒƒãƒ€ãƒ¼ç›´ä¸‹ï¼‰
2. **Today's Performance**: 5ã¤ã®å¥åº·æŒ‡æ¨™ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼ˆHealthKit LIVEã®ç›´ä¸‹ï¼‰

**ãƒ™ãƒ¼ã‚¹ãƒ‡ã‚¶ã‚¤ãƒ³:** HTMLãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼æä¾›ï¼‰

---

## âœ… å®Œäº†ã—ãŸä½œæ¥­ï¼ˆPhase 1-2ï¼‰

### 1. ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«ä½œæˆ

#### ãƒ•ã‚¡ã‚¤ãƒ«: `Models/HealthKitLiveData.swift`
```swift
struct HealthKitLiveData: Codable {
    let hrv: Double?          // [DUMMY] HealthKit HRVãƒ‡ãƒ¼ã‚¿ã«ç½®ãæ›ãˆ
    let rhr: Int?            // [DUMMY] HealthKitå®‰é™æ™‚å¿ƒæ‹æ•°ã«ç½®ãæ›ãˆ
    let vo2Max: Double?      // [DUMMY] HealthKit VO2Maxã«ç½®ãæ›ãˆ
    let basalCalories: Int?  // [DUMMY] åŸºç¤ä»£è¬è¨ˆç®—å€¤ã«ç½®ãæ›ãˆ
    let lastUpdated: Date
}

enum MetricTrend: String, Codable {
    case up = "â†‘"
    case down = "â†“"
    case neutral = "â†’"
}

struct HealthKitMetric {
    let label: String
    let value: String
    let unit: String
    let trend: MetricTrend
    let updateInterval: TimeInterval

    static let samples: [HealthKitMetric] // [DUMMY] ãƒ†ã‚¹ãƒˆç”¨ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿
}
```

**é‡è¦ãƒã‚¤ãƒ³ãƒˆ:**
- å…¨ã¦ã®ãƒ‡ãƒ¼ã‚¿ã«`// [DUMMY]`ã‚³ãƒ¡ãƒ³ãƒˆä»˜ä¸æ¸ˆã¿
- `samples`ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã§ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿æä¾›

#### ãƒ•ã‚¡ã‚¤ãƒ«: `Models/PerformanceMetrics.swift`
```swift
struct PerformanceMetrics: Codable {
    let recovery: MetricScore      // [DUMMY] å®Ÿéš›ã®è¨ˆç®—å€¤ã«ç½®ãæ›ãˆ
    let metabolic: MetricLevel     // [DUMMY] å®Ÿéš›ã®åˆ¤å®šå€¤ã«ç½®ãæ›ãˆ
    let inflammation: MetricLevel  // [DUMMY] CRPåŸºæº–å€¤ã«ç½®ãæ›ãˆ
    let longevity: Double          // [DUMMY] è€åŒ–é€Ÿåº¦è¨ˆç®—å€¤ã«ç½®ãæ›ãˆ
    let performance: Int           // [DUMMY] çµ±åˆã‚¹ã‚³ã‚¢ã«ç½®ãæ›ãˆ
}

struct MetricScore: Codable {
    let score: Int
    let delta: String
    let indicator: IndicatorType
}

struct MetricLevel: Codable {
    let level: Level
    let delta: String
    let indicator: IndicatorType

    enum Level: String, Codable {
        case low = "Low"
        case mid = "Mid"
        case high = "High"
    }
}

enum IndicatorType: String, Codable {
    case excellent  // é’ #0088CC
    case high       // ç·‘ #00C853
    case low        // é»„ #FFCB05
}

struct PerformanceDetailData {
    let recovery: [String: String]
    let metabolic: [String: String]
    let inflammation: [String: String]
    let longevity: [String: String]
    let performance: [String: String]

    static var sample: PerformanceDetailData // [DUMMY] è©³ç´°ãƒ‡ãƒ¼ã‚¿
}

struct TuuningIntelligence {
    static let messages: [String] // [DUMMY] AIãƒ¡ãƒƒã‚»ãƒ¼ã‚¸5ç¨®é¡
}
```

**é‡è¦ãƒã‚¤ãƒ³ãƒˆ:**
- 5ã¤ã®å¥åº·æŒ‡æ¨™ã‚’å®Œå…¨ã«ãƒ¢ãƒ‡ãƒ«åŒ–
- è©³ç´°å±•é–‹ç”¨ã®ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã‚‚å®šç¾©æ¸ˆã¿
- Tuuning Intelligenceã®AIãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚‚ç”¨æ„

### 2. HealthKit LIVEã‚»ã‚¯ã‚·ãƒ§ãƒ³ä½œæˆ

#### ãƒ•ã‚¡ã‚¤ãƒ«: `Views/Components/HealthKitLiveSection.swift`

**æ§‹æˆè¦ç´ :**
```swift
struct HealthKitLiveSection: View {
    @State private var metrics = HealthKitMetric.samples // [DUMMY]
    @State private var lastUpdated = Date()
    @State private var timeSinceUpdate: TimeInterval = 2

    var body: some View {
        VStack {
            // Header: "HEALTHKIT LIVE" + pulsing dot
            // Metrics Grid: HRV, RHR, VOâ‚‚max, M.Cal
            // Waveform Placeholder (Phase 5ã§å®Ÿè£…äºˆå®š)
        }
        .padding(12)
        .background(Color.black.opacity(0.02))  // ã‚«ãƒ¼ãƒ‰åŠ¹æœãªã—
        .cornerRadius(8)
    }
}

struct HealthKitMetricItem: View {
    // å„ãƒ¡ãƒˆãƒªã‚¯ã‚¹è¡¨ç¤ºï¼ˆãƒ©ãƒ™ãƒ«ã€å€¤ã€ãƒˆãƒ¬ãƒ³ãƒ‰ï¼‰
}

struct PulsingModifier: ViewModifier {
    // ç·‘ãƒ‰ãƒƒãƒˆã®ãƒ‘ãƒ«ã‚·ãƒ³ã‚°ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
}

struct WaveformPlaceholder: View {
    // æ³¢å½¢ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼
}
```

**ãƒ‡ã‚¶ã‚¤ãƒ³ä»•æ§˜:**
- **èƒŒæ™¯**: `Color.black.opacity(0.02)` ã®ã¿ï¼ˆ`.virgilGlassCard()`ä½¿ç”¨ã—ãªã„ï¼‰
- **ãƒ‘ãƒ«ã‚·ãƒ³ã‚°ãƒ‰ãƒƒãƒˆ**: ç·‘è‰²ã€2ç§’å‘¨æœŸã§æ‹¡å¤§ç¸®å°+é€æ˜åº¦å¤‰åŒ–
- **4ã¤ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹**: ã‚°ãƒªãƒƒãƒ‰ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã€ç™½èƒŒæ™¯`opacity(0.5)`
- **æ›´æ–°æ™‚åˆ»**: "Updated Xs ago" å½¢å¼ã€1ç§’ã”ã¨ã«æ›´æ–°
- **æ³¢å½¢**: Phase 5ã§å®Ÿè£…äºˆå®šï¼ˆç¾åœ¨ã¯ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ï¼‰

**å‹•ä½œ:**
- ã‚¿ã‚¤ãƒãƒ¼ã§1ç§’ã”ã¨ã«æ›´æ–°æ™‚åˆ»ã‚’ã‚«ã‚¦ãƒ³ãƒˆ
- 120ç§’ã§ãƒªã‚»ãƒƒãƒˆï¼ˆå®Ÿéš›ã¯Swiftã‹ã‚‰ã®pushæ›´æ–°ã«ç½®ãæ›ãˆäºˆå®šï¼‰

---

## â³ æœªå®Œäº†ã®ä½œæ¥­ï¼ˆPhase 3-6ï¼‰

### Phase 3: Today's Performanceã‚»ã‚¯ã‚·ãƒ§ãƒ³ä½œæˆ

#### å¿…è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆæœªä½œæˆï¼‰

**1. `Views/Components/TodaysPerformanceSection.swift`**
```swift
struct TodaysPerformanceSection: View {
    @State private var metrics = PerformanceMetrics.sample // [DUMMY]
    @State private var expandedMetric: String? = nil

    var body: some View {
        VStack {
            // Header: "TODAY'S PERFORMANCE" + æ—¥ä»˜
            // 5ã¤ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚°ãƒªãƒƒãƒ‰ï¼ˆ3ã‚«ãƒ©ãƒ ï¼‰
            // Tuuning Intelligence
        }
        .padding(20)
        .virgilGlassCard()  // ã‚¬ãƒ©ã‚¹åŠ¹æœã‚ã‚Š
        .overlay(gradientBorder, alignment: .top)
    }
}
```

**ãƒ‡ã‚¶ã‚¤ãƒ³ä»•æ§˜:**
- **èƒŒæ™¯**: `.virgilGlassCard()`ä½¿ç”¨
- **ä¸Šéƒ¨ãƒœãƒ¼ãƒ€ãƒ¼**: `linear-gradient(90deg, #0088CC 0%, #00C853 25%, #FFCB05 50%, #E91E63 75%, #9C27B0 100%)` 3pxé«˜ã•
- **ã‚°ãƒªãƒƒãƒ‰**: 3ã‚«ãƒ©ãƒ ã€gap 12px
- **ãƒ¡ãƒˆãƒªã‚¯ã‚¹**: Recovery, Metabolic, Inflammation, Longevity, Performance

**2. `Views/Components/PerformanceMetricItem.swift`**
```swift
struct PerformanceMetricItem: View {
    let metric: MetricData
    let isExpanded: Bool
    let onTap: () -> Void

    var body: some View {
        VStack {
            // ã‚¢ã‚¤ã‚³ãƒ³ï¼ˆçµµæ–‡å­—ï¼‰
            // åå‰ï¼ˆUPPERCASEï¼‰
            // ã‚¹ã‚³ã‚¢ï¼ˆå¤§ããï¼‰
            // ãƒ‡ãƒ«ã‚¿ï¼ˆè‰²åˆ†ã‘ï¼‰
            // ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ï¼ˆå³ä¸Šã®å…‰ã‚‹ç‚¹ï¼‰
        }
        .background(Color.white.opacity(0.08))
        .cornerRadius(12)
        .onTapGesture(perform: onTap)
    }
}
```

**3. `Views/Components/TuuningIntelligenceView.swift`**
```swift
struct TuuningIntelligenceView: View {
    @State private var currentMessage = TuuningIntelligence.messages[0] // [DUMMY]

    var body: some View {
        VStack {
            HStack {
                Text("âœ¨ TUUNING INTELLIGENCE")
                Spacer()
                RefreshButton()
            }
            Text(currentMessage)
                .font(.system(size: 10))
        }
        .padding(16)
        .background(purpleGradient)
        .cornerRadius(12)
    }
}
```

**ãƒ‡ã‚¶ã‚¤ãƒ³ä»•æ§˜:**
- **èƒŒæ™¯**: `linear-gradient(135deg, rgba(147, 51, 234, 0.06) 0%, rgba(236, 72, 153, 0.06) 100%)`
- **ãƒœãƒ¼ãƒ€ãƒ¼**: `rgba(147, 51, 234, 0.15)`
- **ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿**: å³ä¸Šã®ãƒ‘ãƒ«ã‚·ãƒ³ã‚°ç´«ãƒ‰ãƒƒãƒˆ
- **æ›´æ–°ãƒœã‚¿ãƒ³**: ã‚¿ãƒƒãƒ—ã§ãƒ©ãƒ³ãƒ€ãƒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º

**4. `Views/Components/MetricDetailView.swift`**
```swift
struct MetricDetailView: View {
    let metric: String
    let data: [String: String] // [DUMMY] è©³ç´°ãƒ‡ãƒ¼ã‚¿
    let onClose: () -> Void

    var body: some View {
        VStack {
            HStack {
                Text("\(metric) Details")
                Spacer()
                CloseButton(action: onClose)
            }
            ForEach(data.sorted(by: { $0.key < $1.key }), id: \.key) { key, value in
                DetailRow(label: key, value: value)
            }
        }
        .padding(16)
        .background(Color.black.opacity(0.02))
        .cornerRadius(12)
    }
}
```

### Phase 4: HomeViewçµ±åˆ

#### å¤‰æ›´ãƒ•ã‚¡ã‚¤ãƒ«: `Views/HomeView.swift`

**ç¾åœ¨ã®æ§‹é€ ï¼ˆLine 36-64ï¼‰:**
```swift
VStack(spacing: VirgilSpacing.lg) {
    // Header
    VStack(alignment: .leading, spacing: VirgilSpacing.xs) {
        Text("TUUN")
        Text("body operating system")
    }

    // AI Core Section
    AICoreSection(currentInsight: aiInsights[aiInsightIndex])

    // Bio Age Card
    BioAgeCard()

    // Longevity Pace Card
    LongevityPaceCard()

    // Metabolic Power Card
    MetabolicPowerCard()

    // Recovery Sync Card
    RecoverySyncCard()

    // Weekly Plan Section
    WeeklyPlanSection()
}
```

**æ–°ã—ã„æ§‹é€ ï¼ˆå®Ÿè£…äºˆå®šï¼‰:**
```swift
VStack(spacing: VirgilSpacing.lg) {
    // Headerï¼ˆå¤‰æ›´ãªã—ï¼‰
    VStack(alignment: .leading, spacing: VirgilSpacing.xs) {
        Text("TUUN")
        Text("body operating system")
    }

    // âœ¨ æ–°è¦: HealthKit LIVE Section
    HealthKitLiveSection()

    // âœ¨ æ–°è¦: Today's Performance Section
    TodaysPerformanceSection()

    // ä»¥ä¸‹ã¯æ—¢å­˜ã®ã¾ã¾å¤‰æ›´ãªã—
    AICoreSection(currentInsight: aiInsights[aiInsightIndex])
    BioAgeCard()
    LongevityPaceCard()
    MetabolicPowerCard()
    RecoverySyncCard()
    WeeklyPlanSection()
}
```

**å¤‰æ›´ç®‡æ‰€:**
- Line 47ä»˜è¿‘ã«`HealthKitLiveSection()`ã‚’è¿½åŠ 
- ãã®ç›´å¾Œã«`TodaysPerformanceSection()`ã‚’è¿½åŠ 
- æ—¢å­˜ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¯ä¸€åˆ‡å¤‰æ›´ã—ãªã„

### Phase 5: æ³¢å½¢ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè£…

#### å¿…è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆæœªä½œæˆï¼‰

**`Views/Components/WaveformShape.swift`**

**HTMLã®å®Ÿè£…ï¼ˆå‚è€ƒï¼‰:**
```javascript
class AbstractWave {
    constructor(svgId, color) {
        this.nodes = [];  // 8å€‹ã®åˆ¶å¾¡ç‚¹
        this.initNodes();
        this.animate();
    }

    initNodes() {
        for (let i = 0; i <= 8; i++) {
            this.nodes.push({
                x: (i / 8) * 400,
                y: 60,
                phase: Math.random() * Math.PI * 2,
                amplitude: 15 + Math.random() * 25
            });
        }
    }

    generatePath() {
        this.nodes.forEach(node => {
            node.phase += 0.02;  // é€Ÿåº¦
            node.y = 60 + Math.sin(node.phase) * node.amplitude;
            node.y += (Math.random() - 0.5) * 2;  // ãƒã‚¤ã‚º
            node.y = Math.max(20, Math.min(100, node.y));
        });

        // ãƒ™ã‚¸ã‚§æ›²ç·šã§ãƒ‘ã‚¹ç”Ÿæˆ
        // ...
    }
}

// 3ã¤ã®ãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼ˆç•°ãªã‚‹ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰
new AbstractWave('wave1', 'gradient1');  // é’-ç·‘
new AbstractWave('wave2', 'gradient2');  // ã‚·ã‚¢ãƒ³-é»„
new AbstractWave('wave3', 'gradient3');  // èµ¤-ç´«
```

**SwiftUIå®Ÿè£…æ–¹é‡:**
```swift
struct WaveformView: View {
    @State private var phase: CGFloat = 0

    var body: some View {
        ZStack {
            WaveLayer(color: Color(hex: "0088CC"), phase: phase, layer: 0)
            WaveLayer(color: Color(hex: "00DDFF"), phase: phase, layer: 1)
            WaveLayer(color: Color(hex: "E91E63"), phase: phase, layer: 2)
        }
        .frame(height: 40)
        .onAppear {
            withAnimation(.linear(duration: 100).repeatForever(autoreverses: false)) {
                phase = .pi * 2
            }
        }
    }
}

struct WaveLayer: View {
    let color: Color
    let phase: CGFloat
    let layer: Int

    var body: some View {
        Canvas { context, size in
            var path = Path()
            let nodes = generateNodes(size: size, phase: phase, layer: layer)

            // ãƒ™ã‚¸ã‚§æ›²ç·šã§ã‚¹ãƒ ãƒ¼ã‚ºãªãƒ‘ã‚¹ç”Ÿæˆ
            path.move(to: CGPoint(x: 0, y: nodes[0]))
            for i in 0..<nodes.count-1 {
                let midX = (CGFloat(i) + 0.5) * size.width / CGFloat(nodes.count)
                let midY = (nodes[i] + nodes[i+1]) / 2
                let controlPoint = CGPoint(x: CGFloat(i) * size.width / CGFloat(nodes.count), y: nodes[i])
                path.addQuadCurve(to: CGPoint(x: midX, y: midY), control: controlPoint)
            }

            // å¡—ã‚Šã¤ã¶ã—
            path.addLine(to: CGPoint(x: size.width, y: size.height))
            path.addLine(to: CGPoint(x: 0, y: size.height))
            path.closeSubpath()

            context.fill(path, with: .linearGradient(...))
        }
        .opacity(0.3)
    }

    func generateNodes(size: CGSize, phase: CGFloat, layer: Int) -> [CGFloat] {
        // å„ãƒ¬ã‚¤ãƒ¤ãƒ¼ã§ç•°ãªã‚‹å‘¨æ³¢æ•°ãƒ»æŒ¯å¹…
        // ãƒã‚¤ã‚ºè¿½åŠ 
        // ç¯„å›²åˆ¶ç´„
    }
}
```

**å®Ÿè£…ã®ãƒã‚¤ãƒ³ãƒˆ:**
- `Canvas` APIã‚’ä½¿ç”¨
- `TimelineView`ã¾ãŸã¯`Timer`ã§å®šæœŸæ›´æ–°
- 3ãƒ¬ã‚¤ãƒ¤ãƒ¼ã§ç•°ãªã‚‹ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
- ã‚†ã£ãã‚Šã¨ã—ãŸæœ‰æ©Ÿçš„ãªå‹•ãï¼ˆ`animationSpeed: 0.01`ï¼‰
- Phase 2ã®`WaveformPlaceholder`ã‚’ç½®ãæ›ãˆ

### Phase 6: ãƒ€ãƒŸãƒ¼ã‚³ãƒ¡ãƒ³ãƒˆç·ç‚¹æ¤œ

**ãƒã‚§ãƒƒã‚¯é …ç›®:**
```
[âœ…] Models/HealthKitLiveData.swift - å…¨ãƒ‡ãƒ¼ã‚¿ã«// [DUMMY]
[âœ…] Models/PerformanceMetrics.swift - å…¨ãƒ‡ãƒ¼ã‚¿ã«// [DUMMY]
[âœ…] Views/Components/HealthKitLiveSection.swift - å…¨ãƒ‡ãƒ¼ã‚¿ã«// [DUMMY]
[ ] Views/Components/TodaysPerformanceSection.swift - æœªä½œæˆ
[ ] Views/Components/PerformanceMetricItem.swift - æœªä½œæˆ
[ ] Views/Components/TuuningIntelligenceView.swift - æœªä½œæˆ
[ ] Views/Components/MetricDetailView.swift - æœªä½œæˆ
[ ] Views/Components/WaveformShape.swift - æœªä½œæˆ
[ ] Views/HomeView.swift - çµ±åˆæ™‚ã«ç¢ºèª
```

---

## ğŸ“ ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

### ä½œæˆæ¸ˆã¿ï¼ˆâœ…ï¼‰
```
TestFlight/
â”œâ”€â”€ Models/
â”‚   â”œâ”€â”€ HealthKitLiveData.swift âœ…
â”‚   â””â”€â”€ PerformanceMetrics.swift âœ…
â””â”€â”€ Views/
    â””â”€â”€ Components/
        â””â”€â”€ HealthKitLiveSection.swift âœ…
```

### ä½œæˆäºˆå®šï¼ˆâ³ï¼‰
```
TestFlight/
â””â”€â”€ Views/
    â””â”€â”€ Components/
        â”œâ”€â”€ TodaysPerformanceSection.swift â³
        â”œâ”€â”€ PerformanceMetricItem.swift â³
        â”œâ”€â”€ TuuningIntelligenceView.swift â³
        â”œâ”€â”€ MetricDetailView.swift â³
        â””â”€â”€ WaveformShape.swift â³
```

### å¤‰æ›´äºˆå®šï¼ˆğŸ”§ï¼‰
```
TestFlight/
â””â”€â”€ Views/
    â””â”€â”€ HomeView.swift ğŸ”§ (Line 47ä»˜è¿‘ã«2è¡Œè¿½åŠ ã®ã¿)
```

---

## ğŸ¨ ãƒ‡ã‚¶ã‚¤ãƒ³ä»•æ§˜è©³ç´°

### ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆ

```swift
// HealthKit LIVE
let liveDotColor = "#00C853"           // ç·‘ã®ãƒ‘ãƒ«ã‚·ãƒ³ã‚°ãƒ‰ãƒƒãƒˆ
let streamBackground = "rgba(0,0,0,0.02)"
let metricBackground = "rgba(255,255,255,0.5)"

// Today's Performance
let dashboardBackground = ".virgilGlassCard()"
let topBorderGradient = "linear-gradient(90deg, #0088CC, #00C853, #FFCB05, #E91E63, #9C27B0)"
let metricItemBackground = "rgba(255,255,255,0.08)"

// Indicators
let excellentColor = "#0088CC"  // é’
let highColor = "#00C853"       // ç·‘
let lowColor = "#FFCB05"        // é»„

// Tuuning Intelligence
let tuuningBackground = "linear-gradient(135deg, rgba(147,51,234,0.06), rgba(236,72,153,0.06))"
let tuuningBorder = "rgba(147,51,234,0.15)"
let tuuningIndicator = "linear-gradient(135deg, #9333EA, #EC4899)"

// Trend colors
let trendUp = "#00C853"      // ç·‘
let trendDown = "#0088CC"    // é’
let trendNeutral = "#9CA3AF" // ã‚°ãƒ¬ãƒ¼
```

### ãƒ•ã‚©ãƒ³ãƒˆä»•æ§˜

```swift
// HealthKit LIVE
.font(.system(size: 8, weight: .bold))   // "HEALTHKIT LIVE"
.font(.system(size: 7, weight: .semibold)) // ãƒ¡ãƒˆãƒªã‚¯ã‚¹ãƒ©ãƒ™ãƒ«
.font(.system(size: 11, weight: .bold))  // ãƒ¡ãƒˆãƒªã‚¯ã‚¹å€¤
.font(.system(size: 10, weight: .semibold)) // ãƒˆãƒ¬ãƒ³ãƒ‰çŸ¢å°

// Today's Performance
.font(.system(size: 9, weight: .bold))   // "TODAY'S PERFORMANCE"
.font(.system(size: 9, weight: .semibold)) // ãƒ¡ãƒˆãƒªã‚¯ã‚¹å
.font(.system(size: 18, weight: .black)) // ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚¹ã‚³ã‚¢
.font(.system(size: 9, weight: .semibold)) // ãƒ‡ãƒ«ã‚¿

// Tuuning Intelligence
.font(.system(size: 9, weight: .bold))   // "TUUNING INTELLIGENCE"
.font(.system(size: 10))                 // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æœ¬æ–‡
```

### ã‚¹ãƒšãƒ¼ã‚·ãƒ³ã‚°

```swift
// HealthKit LIVE
.padding(12)           // ã‚»ã‚¯ã‚·ãƒ§ãƒ³å…¨ä½“
.padding(.bottom, 12)  // ãƒ˜ãƒƒãƒ€ãƒ¼ä¸‹
.padding(.bottom, 8)   // ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚°ãƒªãƒƒãƒ‰ä¸‹
HStack(spacing: 8)     // ãƒ¡ãƒˆãƒªã‚¯ã‚¹é–“
VStack(spacing: 4)     // ãƒ¡ãƒˆãƒªã‚¯ã‚¹å†…éƒ¨

// Today's Performance
.padding(20)           // ã‚»ã‚¯ã‚·ãƒ§ãƒ³å…¨ä½“
.padding(.top, 8)      // ãƒ˜ãƒƒãƒ€ãƒ¼ä¸Šï¼ˆãƒœãƒ¼ãƒ€ãƒ¼åˆ†ï¼‰
grid gap: 12px         // ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚°ãƒªãƒƒãƒ‰
.padding(12)           // ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚¢ã‚¤ãƒ†ãƒ å†…éƒ¨
.padding(16)           // Tuuning Intelligenceå†…éƒ¨
```

### ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³

```swift
// Pulsing dot
Animation.easeInOut(duration: 2.0).repeatForever(autoreverses: true)
- scaleEffect: 1.0 â†” 1.1
- opacity: 1.0 â†” 0.6

// Metric indicator
Animation.easeInOut(duration: 2.0).repeatForever(autoreverses: true)
- scaleEffect: 1.0 â†” 1.2
- opacity: 1.0 â†” 0.6

// Detail expand
Animation.spring(response: 0.3)
- slideDown from opacity 0, max-height 0, translateY(-10px)
- to opacity 1, max-height 500px, translateY(0)

// Intelligence refresh
- opacity fade: 1.0 â†’ 0.3 â†’ 1.0 (500ms each)
- button spin: rotate(0deg) â†’ rotate(360deg) (800ms)
```

---

## ğŸ”§ æŠ€è¡“çš„è©³ç´°

### ã‚¿ã‚¤ãƒãƒ¼ç®¡ç†

```swift
// HealthKit LIVEæ›´æ–°æ™‚åˆ»
Timer.scheduledTimer(withTimeInterval: 1.0, repeats: true) { _ in
    timeSinceUpdate = Date().timeIntervalSince(lastUpdated)
    if timeSinceUpdate >= 120 {
        lastUpdated = Date()
        timeSinceUpdate = 2
    }
}

// Tuuning Intelligenceè‡ªå‹•æ›´æ–°ï¼ˆ30ç§’ï¼‰
Timer.scheduledTimer(withTimeInterval: 30.0, repeats: true) { _ in
    currentMessage = TuuningIntelligence.messages.randomElement() ?? ""
}
```

### çŠ¶æ…‹ç®¡ç†

```swift
// HealthKit LIVE
@State private var metrics = HealthKitMetric.samples
@State private var lastUpdated = Date()
@State private var timeSinceUpdate: TimeInterval = 2

// Today's Performance
@State private var metrics = PerformanceMetrics.sample
@State private var expandedMetric: String? = nil
@State private var currentIntelligenceMessage = 0

// Waveform
@State private var wavePhase: CGFloat = 0
```

---

## âš ï¸ é‡è¦ãªæ³¨æ„äº‹é …

### çµ¶å¯¾ã«å¤‰æ›´ã—ãªã„ã‚³ãƒ¼ãƒ‰

**HomeView.swiftå†…:**
```swift
// âŒ å¤‰æ›´ç¦æ­¢
struct AICoreSection: View { ... }
struct BioAgeCard: View { ... }
struct LongevityPaceCard: View { ... }
struct MetabolicPowerCard: View { ... }
struct RecoverySyncCard: View { ... }
struct WeeklyPlanSection: View { ... }
struct DataStreamView: View { ... }
struct ProcessingDots: View { ... }
```

**ä»–ã®ãƒ•ã‚¡ã‚¤ãƒ«:**
```swift
// âŒ å¤‰æ›´ç¦æ­¢
OrbBackground()
LinearGradientèƒŒæ™¯
GlassmorphismModifier.swift
VirgilColors.swift
VirgilTypography.swift
VirgilSpacing.swift
```

### å¤‰æ›´ã—ã¦ã‚ˆã„ã‚³ãƒ¼ãƒ‰

```swift
// âœ… å¤‰æ›´å¯èƒ½
HomeView.swift ã® body å†…ã® VStack ã®é †åºã®ã¿
- Line 47ä»˜è¿‘ã«2è¡Œè¿½åŠ 
- æ—¢å­˜ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®é †åºå¤‰æ›´ã‚‚å¯ï¼ˆãŸã ã—å†…å®¹ã¯å¤‰æ›´ç¦æ­¢ï¼‰
```

---

## ğŸ› æ—¢çŸ¥ã®å•é¡Œãƒ»TODO

### ç¾åœ¨ã®å•é¡Œ
1. **æ³¢å½¢ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³æœªå®Ÿè£…** - Phase 5ã§å¯¾å¿œäºˆå®š
2. **å®Ÿéš›ã®HealthKitãƒ‡ãƒ¼ã‚¿å–å¾—æœªå®Ÿè£…** - å…¨ã¦ãƒ€ãƒŸãƒ¼ãƒ‡ãƒ¼ã‚¿
3. **AIåˆ†æAPIæœªæ¥ç¶š** - ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯å›ºå®šé…åˆ—

### å°†æ¥çš„ãªå®Ÿè£…
```swift
// [DUMMY] å®Ÿéš›ã®HealthKitå–å¾—å‡¦ç†ã«ç½®ãæ›ãˆ
func getLatestHealthKitData() -> HealthKitLiveData {
    // HealthKit APIã‚³ãƒ¼ãƒ«
}

// [DUMMY] å®Ÿéš›ã®AIåˆ†æAPIã‚³ãƒ¼ãƒ«ã«ç½®ãæ›ãˆ
func generateAIInsight(data: AIAnalysisRequest) -> String {
    // AI API ã‚³ãƒ¼ãƒ«
}

// [DUMMY] å®Ÿéš›ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¨ˆç®—ã«ç½®ãæ›ãˆ
func calculatePerformanceMetrics() -> PerformanceMetrics {
    // è¤‡é›‘ãªè¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯
}
```

---

## ğŸ“ æ¬¡ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã§ã®ä½œæ¥­æ‰‹é †

### Step 1: ç¾çŠ¶ç¢ºèª
```bash
cd /Users/sasakiryo/Documents/TestFlight
ls Models/HealthKitLiveData.swift
ls Models/PerformanceMetrics.swift
ls Views/Components/HealthKitLiveSection.swift
```

### Step 2: Phase 3ã®å®Ÿè£…é–‹å§‹
```
1. TodaysPerformanceSection.swift ä½œæˆ
2. PerformanceMetricItem.swift ä½œæˆ
3. TuuningIntelligenceView.swift ä½œæˆ
4. MetricDetailView.swift ä½œæˆ
```

### Step 3: HomeViewã«çµ±åˆ
```swift
// HomeView.swift Line 47ä»˜è¿‘
HealthKitLiveSection()
TodaysPerformanceSection()
```

### Step 4: ãƒ“ãƒ«ãƒ‰ç¢ºèª
```bash
xcodebuild -project TUUN.xcodeproj -scheme TUUN build
```

### Step 5: Phase 5ï¼ˆæ³¢å½¢ï¼‰å®Ÿè£…
```
WaveformShape.swift ä½œæˆ
HealthKitLiveSection.swiftã®WaveformPlaceholderã‚’ç½®ãæ›ãˆ
```

### Step 6: æœ€çµ‚ç¢ºèª
```
- å…¨ãƒ€ãƒŸãƒ¼ã‚³ãƒ¡ãƒ³ãƒˆç¢ºèª
- æ—¢å­˜ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãŒç„¡å¤‰æ›´ã‹ç¢ºèª
- ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼ãªã—ç¢ºèª
```

---

## ğŸ“„ å‚è€ƒè³‡æ–™

### å…ƒã®HTMLãƒ‡ã‚¶ã‚¤ãƒ³è¦ç‚¹
- HealthKit LIVE: ãƒ‘ãƒ«ã‚·ãƒ³ã‚°ãƒ‰ãƒƒãƒˆã€4ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã€3ãƒ¬ã‚¤ãƒ¤ãƒ¼æ³¢å½¢
- Today's Performance: 5æŒ‡æ¨™ã€3ã‚«ãƒ©ãƒ ã‚°ãƒªãƒƒãƒ‰ã€è©³ç´°å±•é–‹
- Tuuning Intelligence: ç´«ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã€æ›´æ–°ãƒœã‚¿ãƒ³ã€5ç¨®é¡ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸

### Liquid GlassçŠ¶æ…‹
- `.virgilGlassCard()`ã«`.tint(.white.opacity(0.15))`è¿½åŠ æ¸ˆã¿
- `@ViewBuilder`ã§AnyViewå‰Šé™¤æ¸ˆã¿
- æœ€æ–°ã‚³ãƒŸãƒƒãƒˆ: `48d8586`

---

## âœ… å®Œäº†ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆï¼ˆå…¨ä½“ï¼‰

### ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«
- [âœ…] HealthKitLiveData.swiftä½œæˆ
- [âœ…] PerformanceMetrics.swiftä½œæˆ
- [âœ…] å…¨ãƒ€ãƒŸãƒ¼ã‚³ãƒ¡ãƒ³ãƒˆä»˜ä¸

### UI Components
- [âœ…] HealthKitLiveSection.swiftä½œæˆ
- [ ] TodaysPerformanceSection.swiftä½œæˆ
- [ ] PerformanceMetricItem.swiftä½œæˆ
- [ ] TuuningIntelligenceView.swiftä½œæˆ
- [ ] MetricDetailView.swiftä½œæˆ
- [ ] WaveformShape.swiftä½œæˆ

### Integration
- [ ] HomeView.swiftã«çµ±åˆ
- [ ] ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼è§£æ¶ˆ
- [ ] å®Ÿæ©Ÿãƒ†ã‚¹ãƒˆ

### Documentation
- [âœ…] å¼•ãç¶™ãæ›¸ä½œæˆï¼ˆæœ¬ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
- [ ] å…¨ãƒ€ãƒŸãƒ¼ã‚³ãƒ¡ãƒ³ãƒˆæœ€çµ‚ç¢ºèª

---

**æœ€çµ‚æ›´æ–°:** 2025-10-10
**ä½œæˆè€…:** Claude Code Assistant
**é€²æ—çŠ¶æ³:** Phase 2/6 å®Œäº†ï¼ˆ33%ï¼‰
**æ¬¡å›æ‹…å½“è€…:** ã“ã®å¼•ãç¶™ãæ›¸ã‚’èª­ã‚“ã§Phase 3ã‹ã‚‰é–‹å§‹ã—ã¦ãã ã•ã„
