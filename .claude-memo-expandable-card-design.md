# カード拡大表示の設計方針

## ✅ 採用する方法

### `.blur()`修飾子を使った背景ブラー
- `HealthMetricsGridSection`に`.blur(radius: isExpanded ? 8 : 0)`を適用
- シンプルで効果的
- 親ビューの制約を受けない
- コードがクリーンで保守しやすい

## ❌ 使用禁止事項

### オーバーレイは一切使用しない
以下のような視覚的なオーバーレイ要素は**決して実装しないこと**：
- `Color.black.opacity(0.3)` などの半透明カラーオーバーレイ
- `.ultraThinMaterial` 等のマテリアルオーバーレイ
- `Rectangle().fill()` などのシェイプオーバーレイ
- その他の視覚的なオーバーレイ要素全般

## 理由

1. **不要な視覚要素**: オーバーレイは余計な視覚的ノイズを生む
2. **`.blur()`で十分**: ブラー効果だけで十分な視覚的分離が得られる
3. **シンプルさ**: コードが単純で理解しやすい
4. **パフォーマンス**: 余計なレイヤーを描画しない

## 現在の実装

### ブラー効果の適用箇所
- **ExpandableCardOverlay.swift:99**
  ```swift
  content
      .blur(radius: isExpanded ? 8 : 0)
      .animation(.easeInOut(duration: 0.3), value: isExpanded)
  ```

- **HealthMetricsGridSection.swift:128**
  ```swift
  .expandableCard(detail: currentDetail, isExpanded: $isExpanded, namespace: animation)
  ```

### 動作
1. ユーザーが4枚のカードのいずれかをタップ
2. `isExpanded = true` になる
3. `HealthMetricsGridSection`全体（4枚のカード）に8pxのブラーがかかる
4. 詳細カードが前面に表示される
5. 背景をタップすると `isExpanded = false` に戻る

## 今後の開発時の注意

- カード拡大機能を修正・拡張する際は、この設計方針を必ず守ること
- オーバーレイを追加したくなっても、**絶対に追加しない**
- `.blur()`修飾子のみで視覚的な分離を実現すること

---

作成日: 2025-11-21
最終更新: 2025-11-21
